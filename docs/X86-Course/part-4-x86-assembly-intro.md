
خب دوست عزیزم تو هر سنی که هستی ، میخوایم سفری رو شروع کنیم که زندگیت رو برای همیشه تغییر میده !

مطالب زیادی برای یادگیری وجود داره تا به درک خوبی از زبان Assembly برسیم و بدونیم چرا فهم اصول اون مهمه .

اولین چیزی هم که میخوام یاد بگیریم اینه که ببینیم Instruction Set ‌چیه ؟

## Instruction set
زمانی که CPU ها به وجود اومدند ، طوری طراحی شدند که یکسری کار ها رو بلد بودن انجام بدن .  
مثلا بلد بودن داده ها رو جابه جا کنند ، محاسبات ریاضی انجام بدن ، یا به بخش های دیگه سیستم دسترسی داشته باشند .  

حالا این وسط در واقع برنامه های ما به یک مکانیزمی نیاز داشتند تا به CPU دستور بدن که کدوم یک
از اون کار هایی رو که بلده ، انجام بده.
اینجا مهندسان اومدند و یک سری opcode به هر یک از اون کار ها اختصاص دادند .

حالا opcode چیه ؟ درواقع برای هر عملیاتی که cpu بلده انجام بده یک Code در نظر گرفتند و جدولی از این کد ها رو آماده کردند .

برای مثال فرض کن من یک لیست دارم با این opcode ها :  
```
Add -> 0x7772
Mov -> 0x6251
```

اینجا چه اتفاقی افتاده ؟! CPU عملیاتی مثل جمع رو بلده ، حالا ما به شکل فرضی اومدیم گفتیم عملیات جمع 
اپکدش ، 7772 باشه .  
به این صورت وقتی که نیاز داریم CPU عملیات جمع رو برای ما انجام بده ، کافیه عدد 7772 براش بفرستیم .  
به این مجموعه از دستورات پایه که به CPU میگه چه کاری رو انجام بده ، Instruction set میگن .

?> پس CPU هایی که از یک Instruction set خاص پیروی میکنند موظف هستند Opcode هایی که توی این Instruction set تعریف شده‌اند رو پیاده‌سازی کنند .

## X86 Instruction Set

خب حالا وقتشه بیایم بیایم Instruction Set معروفی به اسم X86 رو بررسی کنیم و ببینیم که چرا اکثرا malware ها عاشق این  
Instruction Set هستند .

تو سال ۱۹۷۸ شرکت intel اومد و ریزپردازنده[ intel 8086](https://en.wikipedia.org/wiki/Intel_8086) رو معرفی کرد ، این ریزپردازنده از معماری و instruction set ای با نام X86 استفاده میکرد .  
این instruction set به سرعت محبوب شد و شرکت های دیگه پردازنده سازی مثل AMD و ... رو این معماری کارکردند و گسترشش دادند .  
زبان اسمبلی هم از اونور برای این معماری گسترش داده شد .  
ریزپردازنده‌های سازگار با X86 به آن دسته از پردازنده‌هایی گفته می‌شود که مجموعه دستورات (Instruction Set) X86 را که توسط شرکت اینتل در دهه ۱۹۷۰ برای اولین بار معرفی شد، پشتیبانی می‌کنند. این معماری ابتدا برای ریزپردازنده‌های 16 بیتی طراحی شد، اما به مرور زمان به 32 و 64 بیتی گسترش یافت. پردازنده‌های سازگار با X86 در بسیاری از کامپیوترهای شخصی و سرورها استفاده می‌شوند. علاوه بر اینتل، شرکت‌هایی مانند AMD نیز پردازنده‌هایی تولید می‌کنند که با این مجموعه دستورات سازگار هستند.
اولین سوال این است که زبان اسمبلی x86 چیست؟ جواب این است که x86 خانواده‌ای از زبان‌های اسمبلی است که با پردازنده‌های سری Intel 8000 سازگار است. زبان‌های اسمبلی x86 برای تولید کد ماشین برای این پردازنده‌ها استفاده می‌شوند و از دستوراتی با نمادهای خاص (mnemonics) تشکیل شده که پردازنده می‌تواند آنها را اجرا کند.

زبان اسمبلی x86 با سیستم‌عامل‌های مختلف کار می‌کند. ما در این آموزش روی زبان اسمبلی لینوکس با استفاده از سینتکس اینتل تمرکز می‌کنیم و همچنین نحوه برنامه‌نویسی به زبان C را یاد می‌گیریم تا بعداً کدها را باز کرده و اسمبلی مربوطه را تحلیل کنیم.

زبان اسمبلی x86 دو نوع سینتکس دارد. سینتکس AT&T که در سیستم‌های یونیکس رایج است و سینتکس اینتل که بیشتر در MS-DOS و ویندوز استفاده می‌شد. در هنگام دیباگ کردن یا باز کردن کد، مخصوصاً در لینوکس یا ویندوز، معمولاً سینتکس اینتل را می‌بینیم. این مهم است، چه در فرمت PE برای فایل‌های ویندوز یا ELF برای فایل‌های لینوکس. تفاوت اصلی این دو در این است که در سینتکس AT&T، منبع قبل از مقصد می‌آید، ولی در اینتل مقصد قبل از منبع است. بعداً بیشتر به این موضوع خواهیم پرداخت.

قبل از اینکه منصرف شوید و بخواهید راه فرار را انتخاب کنید، به یاد داشته باشید که ما این مفاهیم را به تدریج یاد خواهیم گرفت و گیج شدن در این مرحله کاملاً طبیعی است.

ما روی اسمبلی لینوکس تمرکز می‌کنیم زیرا لینوکس روی سخت‌افزارهای متنوعی اجرا می‌شود، از تلفن همراه گرفته تا سرورهای پیچیده تجاری. لینوکس متن‌باز است و نسخه‌های مختلفی دارد. ما از توزیع اوبونتو استفاده خواهیم کرد که رایگان است. در مقابل، ویندوز توسط مایکروسافت کنترل می‌شود و تمامی به‌روزرسانی‌ها و پچ‌های امنیتی از طرف آنها ارائه می‌شود، در حالی که در لینوکس میلیون‌ها متخصص این کار را به‌صورت رایگان انجام می‌دهند!

همچنین، ما بر روی معماری 32 بیتی تمرکز می‌کنیم، زیرا بیشتر بدافزارها برای این معماری نوشته می‌شوند تا سیستم‌های بیشتری را آلوده کنند. برنامه‌ها و بدافزارهای 32 بیتی بر روی سیستم‌های 64 بیتی نیز اجرا می‌شوند، بنابراین باید اصول معماری 32 بیتی را درک کنیم.

در درس بعدی، درباره سیستم اعداد باینری صحبت خواهیم کرد. فنجان قهوه‌تان را آماده کنید، چون به آن نیاز دارید!